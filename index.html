<!DOCTYPE html>
<html lang="en" class="scroll-smooth">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Agraj's Portfolio</title>
    <meta name="description" content="A creative portfolio showcasing the work and thoughts of Agraj.">
    <meta name="keywords" content="Agraj, portfolio, web developer, writer, creative">
    
    <!-- Favicon (using the provided logo) -->
    <link rel="icon" href="logo.png" type="image/png">

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;700&family=Baloo+Bhai+2:wght@400;700&display=swap" rel="stylesheet">

    <!-- Libraries -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.0/p5.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/matter-js/0.17.1/matter.min.js"></script>

    <style>
        /* Custom CSS & Tailwind Config */
        @layer base {
            :root {
                --background: #0F0F0F;
                --text: #EAEAEA;
                --primary: #A349A4; /* Asexual Purple */
                --primary-glow: rgba(163, 73, 164, 0.5);
                --secondary: #FFFFFF;
                --dark: #000000;
                --gray: #808080;
            }
            body {
                background-color: var(--background);
                color: var(--text);
                font-family: 'Outfit', sans-serif;
                overflow-x: hidden;
            }
            .font-display { font-family: 'Outfit', sans-serif; }
            .font-body { font-family: 'Baloo Bhai 2', cursive; }
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: var(--dark); }
        ::-webkit-scrollbar-thumb { background: var(--primary); border-radius: 10px; }
        ::-webkit-scrollbar-thumb:hover { background: #c537c5; }

        /* Text Gradient & Glow */
        .text-gradient {
            background: linear-gradient(90deg, #A349A4, #FFFFFF);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        .text-glow {
            text-shadow: 0 0 8px var(--primary-glow), 0 0 16px var(--primary-glow);
        }

        /* Glassmorphism Effect */
        .glass-card {
            background: rgba(20, 20, 20, 0.4);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        /* Animation class for scroll-triggered fade-in */
        .fade-in-section {
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.6s ease-out, transform 0.6s ease-out;
        }
        .fade-in-section.is-visible {
            opacity: 1;
            transform: translateY(0);
        }
        
        /* Game Overlay */
        #game-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.8);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }
        #game-container {
             position: relative;
             width: 90vw;
             height: 80vh;
             max-width: 1200px;
        }
        #close-game {
            position: absolute;
            top: 20px;
            right: 20px;
            font-size: 2rem;
            color: white;
            cursor: pointer;
            z-index: 1001;
        }
    </style>
</head>

<body class="antialiased">
    <!-- Particle Background -->
    <div id="particle-canvas" class="fixed top-0 left-0 w-full h-full -z-10 opacity-50"></div>
    
    <!-- Game Trigger -->
    <div id="game-trigger" class="fixed bottom-8 right-8 z-50 cursor-pointer group">
        <img src="logo.png" alt="Game Trigger Logo" class="w-16 h-16 transition-all duration-300 transform group-hover:scale-110 animate-pulse">
    </div>
    
    <!-- Game Overlay -->
    <div id="game-overlay">
        <span id="close-game" class="font-display">×</span>
        <div id="game-container"></div>
    </div>


    <!-- Header & Navbar -->
    <header id="navbar" class="fixed top-0 left-0 w-full z-50 transition-all duration-300">
        <div class="container mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-20">
                <div class="flex-shrink-0">
                    <a href="#home" class="text-2xl font-bold font-display text-gradient">A.</a>
                </div>
                <div class="hidden md:block">
                    <div class="ml-10 flex items-baseline space-x-4">
                        <a href="#home" class="nav-link px-3 py-2 rounded-md text-sm font-medium">Home</a>
                        <a href="#writings" class="nav-link px-3 py-2 rounded-md text-sm font-medium">Writings</a>
                        <a href="#work" class="nav-link px-3 py-2 rounded-md text-sm font-medium">Work</a>
                        <a href="#about" class="nav-link px-3 py-2 rounded-md text-sm font-medium">About</a>
                        <a href="#contact" class="nav-link px-3 py-2 rounded-md text-sm font-medium">Contact</a>
                    </div>
                </div>
                <!-- Mobile menu button -->
                <div class="-mr-2 flex md:hidden">
                    <button id="mobile-menu-button" type="button" class="inline-flex items-center justify-center p-2 rounded-md text-gray-400 hover:text-white hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-800 focus:ring-white">
                        <span class="sr-only">Open main menu</span>
                        <svg class="block h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
                        </svg>
                        <svg class="hidden h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                        </svg>
                    </button>
                </div>
            </div>
        </div>
        <!-- Mobile menu, show/hide based on menu state. -->
        <div class="md:hidden hidden" id="mobile-menu">
            <div class="px-2 pt-2 pb-3 space-y-1 sm:px-3 glass-card m-2 rounded-lg">
                <a href="#home" class="block nav-link px-3 py-2 rounded-md text-base font-medium">Home</a>
                <a href="#writings" class="block nav-link px-3 py-2 rounded-md text-base font-medium">Writings</a>
                <a href="#work" class="block nav-link px-3 py-2 rounded-md text-base font-medium">Work</a>
                <a href="#about" class="block nav-link px-3 py-2 rounded-md text-base font-medium">About</a>
                <a href="#contact" class="block nav-link px-3 py-2 rounded-md text-base font-medium">Contact</a>
            </div>
        </div>
    </header>

    <main class="container mx-auto px-4 sm:px-6 lg:px-8">
        <!-- Home Section -->
        <section id="home" class="min-h-screen flex flex-col items-center justify-center text-center fade-in-section">
            <div class="preserved-top-element mb-8 flex flex-col items-center">
                <img src="logo.png" alt="Main Logo" class="w-24 h-24 mb-4">
                <blockquote class="font-body text-xl italic text-gray-300">"And, when you want something, all the universe conspires in helping you to achieve it."</blockquote>
            </div>
            <img src="agraj.png" alt="Agraj Name Logo" class="w-full max-w-sm mx-auto animate-float">
            <div class="mt-12">
                <a href="#writings" class="scroll-down-btn text-primary animate-bounce">
                    <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                </a>
            </div>
        </section>

        <!-- Writings Section -->
        <section id="writings" class="py-20 fade-in-section">
            <h2 class="section-title">Writings</h2>
            <div id="posts-container" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 mt-10">
                <!-- Posts will be injected here -->
            </div>
        </section>

        <!-- Work Section -->
        <section id="work" class="py-20 fade-in-section">
            <h2 class="section-title">Work</h2>
            <div id="work-container" class="grid grid-cols-1 md:grid-cols-2 gap-8 mt-10">
                <!-- Work items will be injected here -->
            </div>
        </section>

        <!-- About Section -->
        <section id="about" class="py-20 fade-in-section">
            <h2 class="section-title">About Me</h2>
            <div class="max-w-4xl mx-auto mt-10 flex flex-col md:flex-row items-center gap-10">
                <div class="md:w-1/3 flex-shrink-0">
                    <img src="https://via.placeholder.com/300x300.png/A349A4/0F0F0F?text=Agraj" alt="Agraj profile" class="rounded-full shadow-lg mx-auto w-48 h-48 md:w-64 md:h-64 object-cover border-4 border-primary">
                </div>
                <div class="md:w-2/3 text-center md:text-left">
                    <p class="font-body text-lg leading-relaxed text-gray-300">
                        Hey there! I'm Agraj, a passionate creator weaving tales through code and words. My journey is one of constant learning and exploring the intersections of technology and art. I believe in building things that are not only functional but also beautiful and meaningful. When I'm not coding, you can find me lost in a good book, writing poetry, or pondering the mysteries of the universe.
                    </p>
                </div>
            </div>
        </section>

        <!-- Contact Section -->
        <section id="contact" class="py-20 fade-in-section">
            <h2 class="section-title">Get In Touch</h2>
            <p class="text-center font-body text-lg text-gray-400 mt-4">Have a question or want to work together?</p>
            <div class="mt-8 text-center">
                <a href="mailto:dubeyraj585@gmail.com" class="contact-btn">
                    Say Hello
                </a>
            </div>
        </section>
    </main>

    <footer class="text-center py-8 border-t border-t-white/10 mt-20">
        <p class="text-gray-500 font-body">© <span id="year"></span> Agraj Dubey. All Rights Reserved.</p>
    </footer>

    <script>
        // Tailwind Config & Custom Styles
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        background: '#0F0F0F',
                        text: '#EAEAEA',
                        primary: '#A349A4',
                        secondary: '#FFFFFF',
                        dark: '#000000',
                        gray: '#808080',
                        'primary-glow': 'rgba(163, 73, 164, 0.5)',
                    },
                    fontFamily: {
                        display: ['Outfit', 'sans-serif'],
                        body: ['"Baloo Bhai 2"', 'cursive'],
                    },
                    keyframes: {
                        float: {
                          '0%, 100%': { transform: 'translateY(0)' },
                          '50%': { transform: 'translateY(-10px)' },
                        },
                        pulse: {
                            '0%, 100%': { opacity: '1', transform: 'scale(1)' },
                            '50%': { opacity: '0.8', transform: 'scale(1.05)', boxShadow: '0 0 20px var(--primary-glow)' },
                        }
                    },
                    animation: {
                        float: 'float 3s ease-in-out infinite',
                        pulse: 'pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite',
                    }
                }
            }
        }
        
        // --- Global Variables & Initial Setup ---
        let particles = [];
        let posts = [];
        let workItems = [];
        let questions = [];

        document.addEventListener('DOMContentLoaded', () => {
            // Fetch data
            fetch('posts.json').then(res => res.json()).then(data => {
                posts = data;
                displayPosts();
                displayWork();
            });
            fetch('questions.json').then(res => res.json()).then(data => questions = data);
            
            setupEventListeners();
            setupScrollAnimations();
            
            // Set current year in footer
            document.getElementById('year').textContent = new Date().getFullYear();
        });

        // --- P5.js Particle Background ---
        function setup() {
            let canvas = createCanvas(windowWidth, windowHeight);
            canvas.parent('particle-canvas');
            for (let i = 0; i < 100; i++) {
                particles.push(new Particle());
            }
        }

        function draw() {
            background(15, 15, 15);
            for (let particle of particles) {
                particle.update();
                particle.show();
                particle.connect(particles);
            }
        }

        function windowResized() {
            resizeCanvas(windowWidth, windowHeight);
        }

        class Particle {
            constructor() {
                this.pos = createVector(random(width), random(height));
                this.vel = p5.Vector.random2D().mult(random(0.5, 1.5));
                this.size = random(2, 4);
            }
            update() {
                this.pos.add(this.vel);
                this.edges();
            }
            show() {
                noStroke();
                fill('rgba(163, 73, 164, 0.5)');
                circle(this.pos.x, this.pos.y, this.size);
            }
            edges() {
                if (this.pos.x < 0 || this.pos.x > width) this.vel.x *= -1;
                if (this.pos.y < 0 || this.pos.y > height) this.vel.y *= -1;
            }
            connect(particles) {
                particles.forEach(other => {
                    const d = dist(this.pos.x, this.pos.y, other.pos.x, other.pos.y);
                    if (d < 120) {
                        stroke('rgba(163, 73, 164, 0.1)');
                        line(this.pos.x, this.pos.y, other.pos.x, other.pos.y);
                    }
                });
            }
        }
        
        // --- UI & Content Injection ---
        function displayPosts() {
            const container = document.getElementById('posts-container');
            container.innerHTML = posts.map(post => `
                <a href="${post.link}" target="_blank" class="post-card">
                    <img src="${post.image}" alt="${post.title}" class="w-full h-48 object-cover rounded-t-lg">
                    <div class="p-6">
                        <h3 class="text-xl font-bold mb-2">${post.title}</h3>
                        <p class="font-body text-gray-400 text-sm">${post.excerpt}</p>
                    </div>
                </a>
            `).join('');
        }

        function displayWork() {
            const container = document.getElementById('work-container');
            // Assuming the first few posts are work items for demonstration
            workItems = posts.slice(0, 4); 
            container.innerHTML = workItems.map(item => `
                 <a href="${item.link}" target="_blank" class="work-card">
                    <img src="${item.image}" alt="${item.title}" class="w-full h-56 object-cover rounded-lg">
                    <div class="absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center opacity-0 hover:opacity-100 transition-opacity duration-300 rounded-lg">
                        <h3 class="text-white text-2xl font-bold p-4 text-center">${item.title}</h3>
                    </div>
                </a>
            `).join('');
        }

        // --- Event Listeners & Navbar Logic ---
        function setupEventListeners() {
            const mobileMenuButton = document.getElementById('mobile-menu-button');
            const mobileMenu = document.getElementById('mobile-menu');

            mobileMenuButton.addEventListener('click', () => {
                mobileMenu.classList.toggle('hidden');
                mobileMenuButton.querySelector('svg.block').classList.toggle('hidden');
                mobileMenuButton.querySelector('svg.hidden').classList.toggle('hidden');
            });
            
            // Close mobile menu on link click
            document.querySelectorAll('#mobile-menu a').forEach(link => {
                link.addEventListener('click', () => {
                     mobileMenu.classList.add('hidden');
                     mobileMenuButton.querySelector('svg.block').classList.remove('hidden');
                     mobileMenuButton.querySelector('svg.hidden').classList.add('hidden');
                });
            });

            // Navbar style on scroll
            window.addEventListener('scroll', () => {
                const navbar = document.getElementById('navbar');
                if (window.scrollY > 50) {
                    navbar.classList.add('glass-card', 'shadow-lg');
                } else {
                    navbar.classList.remove('glass-card', 'shadow-lg');
                }
            });
            
            // Game trigger
            document.getElementById('game-trigger').addEventListener('click', startGame);
            document.getElementById('close-game').addEventListener('click', closeGame);
        }

        // --- Scroll Animations ---
        function setupScrollAnimations() {
            const sections = document.querySelectorAll('.fade-in-section');
            const observer = new IntersectionObserver(entries => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('is-visible');
                    }
                });
            }, { threshold: 0.1 });
            
            sections.forEach(section => observer.observe(section));
        }

        // --- Matter.js Game Logic ---
        let engine, render, runner;
        function startGame() {
            const overlay = document.getElementById('game-overlay');
            overlay.style.display = 'flex';
            
            // Prevent multiple initializations
            if (engine) return;

            const gameContainer = document.getElementById('game-container');
            const { Engine, Render, Runner, World, Bodies, Mouse, MouseConstraint } = Matter;

            engine = Engine.create();
            render = Render.create({
                element: gameContainer,
                engine: engine,
                options: {
                    width: gameContainer.clientWidth,
                    height: gameContainer.clientHeight,
                    wireframes: false,
                    background: 'transparent'
                }
            });
            
            // Add walls
            const wallOptions = { isStatic: true, render: { fillStyle: 'var(--primary)' } };
            World.add(engine.world, [
                Bodies.rectangle(gameContainer.clientWidth / 2, 0, gameContainer.clientWidth, 20, wallOptions), // top
                Bodies.rectangle(gameContainer.clientWidth / 2, gameContainer.clientHeight, gameContainer.clientWidth, 20, wallOptions), // bottom
                Bodies.rectangle(0, gameContainer.clientHeight / 2, 20, gameContainer.clientHeight, wallOptions), // left
                Bodies.rectangle(gameContainer.clientWidth, gameContainer.clientHeight / 2, 20, gameContainer.clientHeight, wallOptions) // right
            ]);

            // Add some shapes
            for (let i = 0; i < 20; i++) {
                World.add(engine.world, Bodies.rectangle(random(50, gameContainer.clientWidth - 50), random(50, 100), random(20, 50), random(20, 50), {
                     render: { fillStyle: `hsl(${random(280, 320)}, 70%, 60%)` }
                }));
                 World.add(engine.world, Bodies.circle(random(50, gameContainer.clientWidth - 50), random(50, 100), random(10, 30), {
                     render: { fillStyle: `hsl(${random(0, 360)}, 70%, 60%)` }
                }));
            }
            
             // Add mouse control
            const mouse = Mouse.create(render.canvas);
            const mouseConstraint = MouseConstraint.create(engine, {
                mouse: mouse,
                constraint: {
                    stiffness: 0.2,
                    render: { visible: false }
                }
            });
            World.add(engine.world, mouseConstraint);
            render.mouse = mouse;

            Render.run(render);
            runner = Runner.create();
            Runner.run(runner, engine);
        }

        function closeGame() {
            const overlay = document.getElementById('game-overlay');
            overlay.style.display = 'none';
        }

        // Apply shared styles programmatically
        document.addEventListener('DOMContentLoaded', () => {
            const sectionTitles = document.querySelectorAll('section h2');
            sectionTitles.forEach(title => {
                title.classList.add('text-4xl', 'font-bold', 'text-center', 'font-display', 'text-gradient');
            });

            const navLinks = document.querySelectorAll('.nav-link');
            navLinks.forEach(link => {
                link.classList.add('text-gray-300', 'hover:text-primary', 'transition-colors', 'duration-300');
            });
            
            const contactBtn = document.querySelector('.contact-btn');
            contactBtn.classList.add('bg-primary', 'text-white', 'font-bold', 'py-3', 'px-8', 'rounded-full', 'hover:bg-opacity-80', 'transition-all', 'duration-300', 'shadow-lg', 'shadow-primary-glow', 'transform', 'hover:scale-105');
            
            const postCards = document.querySelectorAll('.post-card');
             postCards.forEach(card => {
                card.classList.add('glass-card', 'rounded-lg', 'overflow-hidden', 'transition-all', 'duration-300', 'hover:transform', 'hover:-translate-y-2', 'hover:shadow-2xl', 'hover:shadow-primary-glow');
            });
            
            const workCards = document.querySelectorAll('.work-card');
             workCards.forEach(card => {
                card.classList.add('relative', 'rounded-lg', 'overflow-hidden', 'shadow-lg', 'group');
            });
        });
        
    </script>
</body>

</html>
